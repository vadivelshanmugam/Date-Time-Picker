!function(a){a.fn.dateTimePicker=function(b){function c(a,b){var c=parseInt(a.slice(1),16),d=0>b?0:255,e=0>b?-1*b:b,f=c>>16,g=c>>8&255,h=255&c;return"#"+(16777216+65536*(Math.round((d-f)*e)+f)+256*(Math.round((d-g)*e)+g)+(Math.round((d-h)*e)+h)).toString(16).slice(1)}function d(b){if(e(),"SPAN"==b.target.nodeName)var c=a(".date").val(),d=c.split(" "),f=d[0].split("/");else var c=a(".date").val(),d=c.split(" "),f=d[0].split("/");""===c?l(u.getDay(),v.getDate(),n.getDate(),r,q):("YYYYMMDD"==m.dateFormat?(y=f[0],x=f[1],w=f[2]):"DDMMYYYY"==m.dateFormat?(y=f[2],x=f[1],w=f[0]):(y=f[2],x=f[0],w=f[1]),r=parseInt(x)-1,q=y,u=new Date(q,r,1),v=new Date(q,r+1,0),l(u.getDay(),v.getDate(),n.getDate(),r,q,w))}function e(){n=new Date,o=n.getDay(),p=n.getDate(),q=n.getFullYear(),r=n.getMonth(),s=n.getHours(),t=n.getMinutes(),u=new Date(q,r,1),v=new Date(q,r+1,0),m.meridiem&&s>12?s-=12:s=s}function f(b){var c=a(b.target);q=a(".datePicker").find(".datePickerYearTxt").text(),r=a(".datePicker").find(".datePickerMonthTxt").data("month");var d=a(".date").val();if(""!=d){var e=d.split(" "),f=e[0].split("/");"YYYYMMDD"==m.dateFormat?(y=f[0],x=f[1],w=f[2]):"DDMMYYYY"==m.dateFormat?(y=f[2],x=f[1],w=f[0]):(y=f[2],x=f[0],w=f[1])}"next"==c.data("action")?11==r?(r=0,q=parseInt(q)+1):r=a(".datePickerMonthTxt").data("month")+1:0==r?(r=11,q=parseInt(q)-1):r=a(".datePickerMonthTxt").data("month")-1,u=new Date(q,r,1),v=new Date(q,r+1,0),r==x-1&&parseInt(q)==parseInt(y)?l(u.getDay(),v.getDate(),n.getDate(),r,q,w):l(u.getDay(),v.getDate(),n.getDate(),r,q)}function g(b){var c=a(b.target);textVal=c.text(),c.text(""==textVal?"hour"==c.data("time")?k(s):k(t):isNaN(textVal)?"hour"==c.data("time")?k(s):k(t):k(c.text()))}function h(b,d){a(".datePicker").empty().append('<div class="datePickerContent">'+C+"</div>"),a(".datePickerMonthYearTxt").text(d).data("year",d);var e="<tr>";a(".datePickerMonthTable").find("tbody").empty();for(var f=0;12>f;f++)e+="<td data-month="+f+' class="datePickerCell">'+z[f].substr(0,3)+"</td>",f%4==3&&(e+="</tr>");a(".datePickerMonthTable").find("tbody").append(e),a(".datePickerMonthTable td").each(function(){a(this).data("month")==b&&a(this).addClass("datePickerSelected").css({background:c(m.baseColor,.7),color:m.selectionFontColor})})}function i(){var b=parseInt(a(".datePickerYearStartTxt").text()-1),d="<tr>";a(".datePickerYearTable").find("tbody").empty();for(var e=1;12>=e;e++)d+="<td data-year="+parseInt(b+e)+' class="datePickerCell">'+parseInt(b+e)+"</td>",e%4==0&&(d+="</tr>");a(".datePickerYearTable").find("tbody").append(d),a(".datePickerYearTable td").each(function(){a(this).data("year")==q&&a(this).addClass("datePickerSelected").css({background:c(m.baseColor,.7),color:m.selectionFontColor})})}function j(){var b,c;r=n.getMonth()+1,s=a(".datePicker").find(".datePickerHour").text(),t=a(".datePicker").find(".datePickerMinute").text(),ampm=a(".datePickerMeridiemChange").text(),""==a(".date").val()?b="YYYYMMDD"==m.dateFormat?k(q)+"/"+k(r)+"/"+k(p)+" "+s+":"+t:"DDMMYYYY"==m.dateFormat?k(p)+"/"+k(r)+"/"+k(q)+" "+s+":"+t:k(r)+"/"+k(p)+"/"+k(q)+" "+s+":"+t:(c=a(".date").val().split(" "),b=c[0]+" "+s+":"+t),b=m.meridiem?b+" "+ampm:b,a(".date").val(b)}function k(a){var b,c,d=a,e="0";return 9>=d?(b=parseInt(d),c=e.concat(b)):a}function l(b,d,e,f,g,h){var i,j=7-b,k=7,l=7-b,n="<tr>";a(".datePicker").empty().append('<div class="datePickerContent">'+B+"</div>");for(var o=1;d>=o;o++){if(0!=l&&j==l){for(var p=1;7-l>=p;p++)i+="<td></td>";n+=i,j=0,k=l}n+=e==o?parseInt(h)==e?'<td align="right" class="datePickerCell datePickerDateCell datePickerSelected datePickerTodayCell" style="background:'+c(m.baseColor,.7)+"; color:"+c(m.baseColor,-1)+'">'+o+"</td>":'<td align="right" class="datePickerCell datePickerDateCell datePickerTodayCell" style="background:'+c(m.baseColor,.1)+'">'+o+"</td>":parseInt(h)==o?'<td align="right" class="datePickerCell datePickerDateCell datePickerSelected" style="background:'+c(m.baseColor,.7)+'">'+o+"</td>":'<td align="right" class="datePickerCell datePickerDateCell">'+o+"</td>",o%k==0&&(n+="</tr>",j=0,k=k==l?l+7:k==l+7?l+14:k==l+14?l+21:k==l+21?l+28:7)}a(".datePickerCalnTable").find("tbody").append(n),a(".datePicker").find(".datePickerYearTxt").text(g).data("year",g),a(".datePicker").find(".datePickerMonthTxt").text(z[f]).data("month",f);var q="";a(".datePickerCalnTable thead tr:nth-child(2)").empty();for(var p=0;p<A.length;p++)q+="<th>"+A[p].substr(0,3)+"</th>";a(".datePickerCalnTable thead tr:nth-child(2)").append(q)}var m=a.extend({lang:"fr-FR",dateFormat:"DDMMYYYY",meridiem:!0,baseColor:"#0066ff",fontColor:"#000000",todayFontColor:"#FFFFFF",selectionFontColor:"#000000"},b);R.setLocale(m.lang),a(".calnOpen-icon").css({color:c(m.baseColor,.1)});var n,o,p,q,r,s,t,u,v,w,x,y,z=[R("January"),R("February"),R("March"),R("April"),R("May"),R("June"),R("July"),R("August"),R("September"),R("October"),R("November"),R("December")],A=[R("Sunday"),R("Monday"),R("Tuesday"),R("Wednesday"),R("Thursday"),R("Friday"),R("Saturday")],B='<div class="datePickerCalnTable">			<table cellpadding="2" cellspacing="0" width="100%">				<thead>					<tr>						<th><span data-action="prev" class="datePickerMonthPrev mouseOver fa fa-angle-double-left"></span></th>						<th colspan="5"><span class="datePickerMonthTxt mouseOver" data-month=""></span> - <span class="datePickerYearTxt mouseOver" data-year=""></span></th>						<th><span data-action="next" class="datePickerMonthNext mouseOver fa fa-angle-double-right"></span></th>					</tr>					<tr>					</tr>				</thead>				<tbody></tbody>			</table>			<div style="text-align: center;"><span class="datePickerTimerIcon fa fa-clock-o" style="color:'+c(m.baseColor,.1)+'"></span></div>		</div>',C='<div class="datePickerMonthTable">			<table border="0" cellpadding="2" cellspacing="0" width="100%">				<thead>					<tr>						<th><span class="datePickerYearPrev mouseOver fa fa-angle-double-left"></span></th>						<th colspan="2"><span class="datePickerMonthYearTxt mouseOver" data-year=""></span></th>						<th><span class="datePickerYearNext mouseOver fa fa-angle-double-right"></span></th>					</tr>				</thead>				<tbody></tbody>			</table>		</div>',D='<div class="datePickerYearTable">			<table border="0" cellpadding="2" cellspacing="0" width="100%">				<thead>					<tr>						<th><span class="datePickerYearSetPrev mouseOver fa fa-angle-double-left"></span></th>						<th colspan="2"><span class="datePickerYearStartTxt"></span> - <span class="datePickerYearEndTxt"></span></th>						<th><span class="datePickerYearSetNext mouseOver fa fa-angle-double-right"></span></th>					</tr>				</thead>				<tbody></tbody>			</table>		</div>',E='<div class="datePickerTimerTable clearfix" style="text-align: center;">			<div><span class="datePickerCalnIcon fa fa-calendar" style="color:'+c(m.baseColor,.1)+'"></span></div>			<div class="fleft wd30">				<a class="datePickerIcon datePickerUpHour fa fa-chevron-up"></a>				<div class="datePickerHour" data-time="hour" contenteditable="true" min="1" max="12"></div>				<a class="datePickerIcon datePickerDownHour fa fa-chevron-down"></a>			</div>			<div class="fleft wd30">				<a class="datePickerIcon datePickerUpMinute fa fa-chevron-up"></a>				<div class="datePickerMinute" data-time="minute" contenteditable="true" min="0" max="59"></div>				<a class="datePickerIcon datePickerDownMinute fa fa-chevron-down"></a>			</div>			<div class="fleft wd30 datePickerMeridiem" style="padding-top: 34px;">			</div>		</div>',F='<div class="datePickerMeridiemChange">AM</div>';a(document).on("click",".calnOpen, .datePickerCalnIcon",function(a){d(a)}),a(document).on("click",function(b){"SPAN"!==b.target.nodeName&&"INPUT"!==b.target.nodeName&&"TH"!==b.target.nodeName&&"TD"!==b.target.nodeName&&"A"!==b.target.nodeName&&"DIV"!==b.target.nodeName&&"TABLE"!==b.target.nodeName&&a(".datePicker").empty()}),a(document).on("click",".datePickerMonthNext, .datePickerMonthPrev",function(a){f(a)}),a(document).on("click",".datePickerMonthTxt, .datePickerYearTxt",function(){q=parseInt(a(".datePickerYearTxt").data("year")),r=a(".datePickerMonthTxt").data("month"),h(r,q)}),a(document).on("click",".datePickerYearTable td",function(){q=a(this).data("year"),r=n.getMonth(),h(r,q)}),a(document).on("click",".datePickerYearNext",function(){q=parseInt(a(this).parent().prev().find(".datePickerMonthYearTxt").text()),a(".datePickerMonthYearTxt").text(q+1).data("year",q+1)}),a(document).on("click",".datePickerYearPrev",function(){q=parseInt(a(this).parent().next().find(".datePickerMonthYearTxt").text()),a(".datePickerMonthYearTxt").text(q-1).data("year",q-1)}),a(document).on("click",".datePickerMonthTable td",function(){q=a(".datePickerMonthYearTxt").data("year"),r=a(this).data("month");var b=a(".date").val();if(""!=b){var c=b.split(" "),d=c[0].split("/");"YYYYMMDD"==m.dateFormat?(y=d[0],x=d[1],w=d[2]):"DDMMYYYY"==m.dateFormat?(y=d[2],x=d[1],w=d[0]):(y=d[2],x=d[0],w=d[1])}u=new Date(q,r,1),v=new Date(q,r+1,0),r==parseInt(x)-1&&q==parseInt(y)?l(u.getDay(),v.getDate(),n.getDate(),r,q,w):l(u.getDay(),v.getDate(),n.getDate(),r,q)}),a(document).on("click",".datePickerMonthYearTxt",function(){a(".datePicker").empty().append('<div class="datePickerContent">'+D+"</div>"),q=parseInt(a(this).text()),a(".datePicker").find(".datePickerYearStartTxt").text(q),a(".datePicker").find(".datePickerYearEndTxt").text(q+11),i()}),a(document).on("click",".datePickerYearSetPrev",function(){q=parseInt(a(this).parent().next().find(".datePickerYearStartTxt").text()),a(".datePicker").find(".datePickerYearStartTxt").text(q-12),a(".datePicker").find(".datePickerYearEndTxt").text(q-1),i()}),a(document).on("click",".datePickerYearSetNext",function(){q=parseInt(a(this).parent().prev().find(".datePickerYearEndTxt").text()),a(".datePicker").find(".datePickerYearStartTxt").text(q+1),a(".datePicker").find(".datePickerYearEndTxt").text(q+12),i()}),a(document).on("click","td.datePickerDateCell","click",function(){var b;r=a(".datePickerMonthTxt").data("month")+1,b="YYYYMMDD"==m.dateFormat?a(".datePickerYearTxt").text()+"/"+k(r)+"/"+k(a(this).text())+" "+k(s)+":"+k(t):"DDMMYYYY"==m.dateFormat?k(a(this).text())+"/"+k(r)+"/"+a(".datePickerYearTxt").text()+" "+k(s)+":"+k(t):k(r)+"/"+k(a(this).text())+"/"+a(".datePickerYearTxt").text()+" "+k(s)+":"+k(t),m.meridiem?b+=n.getHours()>12||12==n.getHours()&&n.getMinutes()>0?" PM":" AM":b=b,a(".date").val(b),a(".datePicker").find(".datePickerHour").text(k(s)),a(".datePicker").find(".datePickerMinute").text(k(t)),a(".datePickerCalnTable td").each(function(){a(this).removeClass("datePickerSelected").css({background:c(m.baseColor,1),color:m.fontColor}),a(this).hasClass("datePickerTodayCell")&&a(this).css({background:c(m.baseColor,.1),color:m.todayFontColor})}),a(this).addClass("datePickerSelected").css({background:c(m.baseColor,.7),color:m.selectionFontColor})}),a(document).on("mouseover",".mouseOver, .datePickerIcon, .datePickerMeridiemChange",function(){a(this).css({"background-color":c(m.baseColor,.8)})}).on("mouseout","th span, .datePickerIcon, .datePickerMeridiemChange",function(){a(this).css({"background-color":c(m.baseColor,1)})}),a(document).on("mouseover","td.datePickerCell",function(){a(this).css({background:c(m.baseColor,.7),color:m.selectionFontColor})}).on("mouseout","td",function(){a(this).css(a(this).hasClass("datePickerTodayCell")?a(this).hasClass("datePickerSelected")?{background:c(m.baseColor,.7),color:m.selectionFontColor}:{background:c(m.baseColor,.1),color:m.todayFontColor}:a(this).hasClass("datePickerSelected")?{background:c(m.baseColor,.7),color:m.selectionFontColor}:{background:c(m.baseColor,1),color:m.selectionFontColor})}),a(document).on("keypress",".datePickerHour, .datePickerMinute",function(b){if(37==b.keyCode||39==b.keyCode||8==b.keyCode||46==b.keyCode)return!0;var c=a(b.target),d=c.text();d.length>=2&&b.preventDefault()}),a(document).on("keyup",".datePickerHour, .datePickerMinute",function(b){var c=a(b.target),d=c.text();isNaN(d)?c.text(""):d>c.attr("max")&&c.text("")}),a(document).on("blur",".datePickerHour, .datePickerMinute",function(a){g(a),j()}),a(document).on("click",".datePickerUpHour",function(){var b=a(this),c=b.next().text(),d=k(b.next().attr("min"));c<b.next().attr("max")&&b.next().text(k(parseInt(c)+1)),c==b.next().attr("max")&&b.next().text(d),j()}),a(document).on("click",".datePickerUpMinute",function(){var b=a(this),c=b.next().text(),d=a(".datePicker").find(".datePickerHour"),e=k(b.next().attr("min"));c<b.next().attr("max")&&b.next().text(k(parseInt(c)+1)),c==b.next().attr("max")&&(b.next().text(e),d.text(parseInt(d.text())==d.attr("max")?k(d.attr("min")):k(parseInt(d.text())+1))),j()}),a(document).on("click",".datePickerDownHour",function(){var b=a(this),c=b.prev().text(),d=k(b.prev().attr("min"));c>0&&b.prev().text(k(parseInt(c)-1)),c==d&&b.prev().text(b.prev().attr("max")),j()}),a(document).on("click",".datePickerDownMinute",function(){var b=a(this),c=b.prev().text(),d=a(".datePicker").find(".datePickerHour"),e=k(b.prev().attr("min"));c>0&&b.prev().text(k(parseInt(c)-1)),c==e&&(b.prev().text(b.prev().attr("max")),d.text(parseInt(d.text())==d.attr("min")?d.attr("max"):k(parseInt(d.text()-1)))),j()}),a(document).on("click",".datePickerMeridiemChange",function(){a(this).text("AM"==a(this).text()?"PM":"AM"),""==a(".date").val()?selectDate="YYYYMMDD"==m.dateFormat?k(q)+"/"+k(r)+"/"+k(p)+" "+k(s)+":"+k(t):"DDMMYYYY"==m.dateFormat?k(p)+"/"+k(r)+"/"+k(q)+" "+k(s)+":"+k(t):k(r)+"/"+k(p)+"/"+k(q)+" "+k(s)+":"+k(t):(newVal=a(".date").val().split(" "),selectDate=newVal[0]+" "+k(s)+":"+k(t)),selectDate=m.meridiem?selectDate+" "+a(this).text():selectDate,a(".date").val(selectDate)}),a(document).on("click",".datePickerTimerIcon",function(){a(".datePicker").empty().append('<div class="datePickerContent">'+E+"</div>"),m.meridiem?(a(".datePickerMeridiem").append(F).css({"padding-top":"34px"}),a(".wd30").css({width:"30%"}),a(".datePickerHour").attr("min",1),a(".datePickerHour").attr("max",12),a(".datePickerMeridiemChange").text(n.getHours()>12||12==n.getHours()&&n.getMinutes()>0?"PM":"AM")):(a(".datePickerMeridiem").empty().css({"padding-top":"0"}),a(".wd30").css({width:"50%"}),a(".datePickerHour").attr("min",0),a(".datePickerHour").attr("max",23)),a(".datePicker").find(".datePickerHour").text(k(s)),a(".datePicker").find(".datePickerMinute").text(k(t))})}}(jQuery);